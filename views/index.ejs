<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
        />
        <title>email shedule</title>
        <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css" />
        <link rel="stylesheet" href="assets/css/styles.min.css" />
        <link
            rel="stylesheet"
            href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdn.datatables.net/buttons/1.6.5/css/buttons.dataTables.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/css/dataTables.bootstrap4.min.css"
        />
    </head>

    <body>
        <header
            class="d-lg-flex justify-content-lg-center align-items-lg-center"
            style="
                height: 86px;
                color: var(--bs-white);
                background: var(--bs-blue);
                margin: 0;
            "
        >
            <h1>RicMail</h1>
        </header>
        <div class="row register-form" style="max-width: 1000px; margin: auto">
            <div class="col-md-8 offset-md-2">
                <form
                    class="custom-form"
                    style="margin: auto 0"
                    action="/set"
                    method="post"
                >
                    <h1>Create New Gmail</h1>
                    <div class="row form-group" style="width: 100%">
                        <div class="col-sm-4 label-column">
                            <label class="col-form-label" for="name-input-field"
                                >Email</label
                            >
                        </div>
                        <div class="col-sm-6 input-column">
                            <input
                                class="form-control"
                                type="email"
                                placeholder="Email to send"
                                autocomplete="on"
                                inputmode="email"
                                name="email"
                            />
                        </div>
                    </div>
                    <div class="row form-group" style="width: 100%">
                        <div class="col-sm-4 label-column">
                            <label
                                class="col-form-label"
                                for="email-input-field"
                                >Title</label
                            >
                        </div>
                        <div class="col-sm-6 input-column">
                            <input
                                class="form-control"
                                type="text"
                                placeholder="Title"
                                name="title"
                            />
                        </div>
                    </div>
                    <div class="row form-group" style="width: 100%">
                        <div class="col-sm-4 label-column">
                            <label
                                class="col-form-label"
                                for="pawssword-input-field"
                                >message</label
                            >
                        </div>
                        <div class="col-sm-6 input-column">
                            <textarea
                                class="form-control"
                                placeholder="Enter Your Message"
                                name="message"
                            ></textarea>
                        </div>
                    </div>
                    <div class="row form-group" style="width: 100%">
                        <div class="col-sm-4 label-column">
                            <label
                                class="col-form-label"
                                for="repeat-pawssword-input-field"
                                >Html</label
                            >
                        </div>
                        <div class="col-sm-6 input-column">
                            <textarea
                                class="form-control"
                                placeholder="<Enter some code>"
                                name="html"
                            ></textarea>
                        </div>
                    </div>
                    <div class="row form-group" style="width: 100%">
                        <div class="col-sm-4 label-column">
                            <label
                                class="col-form-label"
                                for="repeat-pawssword-input-field"
                                >Date&amp;Time</label
                            >
                        </div>
                        <div class="col-sm-6 input-column">
                            <input
                                class="form-control"
                                type="datetime-local"
                                name="time"
                            />
                        </div>
                    </div>
                    <button class="btn btn-light submit-button" type="submit">
                        Set and Start the timer
                    </button>
                </form>
            </div>
        </div>
        <h1><button onclick="location.reload();">REFRESH</button></h1>
        <section>
            <h1 style="text-align: center">All Mails</h1>
        <% if(data[0]){ %> 
        <% for(i in data){ %>
        <div class="row register-form" style="max-width: 1000px; margin: auto">
            <div
                class="col-md-8 offset-md-2"
                style="max-width: 900px; width: 100%; margin: auto"
            >
                <form
                    class="custom-form"
                    action="/delete"
                    method="POST"
                    style="margin: auto 0"
                >
                        <input
                            type="text"
                            style="display: none"
                            name="id"
                            value="<%= data[i].id %>"
                        />
                    <h1>
                        <% if(data[i].title){ %> <%= data[i].title %> <% } %>
                    </h1>
                    <div class="row form-group" style="width: 100%">
                        <div class="col-sm-4 label-column">
                            <label class="col-form-label" for="name-input-field"
                                >Email</label
                            >
                        </div>
                        <div class="col-sm-6 input-column">
                            <input
                                value="<%= data[i].email %>"
                                class="form-control"
                                type="text"
                                placeholder="Email to send"
                                autocomplete="on"
                                inputmode="email"
                                readonly=""
                            />
                        </div>
                    </div>
                    <div class="row form-group" style="width: 100%">
                        <div class="col-sm-4 label-column">
                            <label
                                class="col-form-label"
                                for="pawssword-input-field"
                                >message</label
                            >
                        </div>
                        <div class="col-sm-6 input-column">
                            <textarea
                                class="form-control"
                                placeholder="Enter Your Message"
                                readonly=""
                            >
                            <%= data[i].message %></textarea>
                        </div>
                    </div>
                    <div class="row form-group" style="width: 100%">
                        <div class="col-sm-4 label-column">
                            <label
                                class="col-form-label"
                                for="repeat-pawssword-input-field"
                                >Html</label
                            >
                        </div>
                        <div class="col-sm-6 input-column">
                            <textarea
                                class="form-control"
                                placeholder="<Enter some code>"
                                readonly=""
                            >
                        <% if(data[i].html !== ''){ %>
                    <p>html:: <%= data[i].html %></p>
                            <% } %></textarea
                            >
                        </div>
                    </div>
                    <div class="row form-group" style="width: 100%">
                        <div class="col-sm-4 label-column">
                            <label
                                class="col-form-label"
                                for="repeat-pawssword-input-field"
                                >Date&amp;Time</label
                            >
                        </div>
                        <div class="col-sm-6 input-column">
                            <%  function format(number){ %>
                            <%        let ans = number; %>
                                <%      if(number < 10){    %>
                                    <%        ans = "0"+number  %>
                                    <%  }   %>
                                    <% return ans;  %>
                                <% } %>
                            <input
                                class="form-control"
                                <% let date = new Date(data[i].time); %>
                                <% let Dstring = `${date.getFullYear()}-${format(date.getMonth())}-${format(date.getDate())}T${date.toTimeString().slice(0,8)}` %> 
                                value="<%= Dstring %>"
                                type="datetime-local"
                                readonly=""
                            />
                        </div>
                    </div>
                    <input
                        type="text"
                        style="display: none"
                        name="id"
                        value="<%= data[i].id %>"
                    />
                    <button
                        class="btn btn-light submit-button"
                        type="submit"
                        style="
                            border-color: var(--bs-pink);
                            background: var(--bs-red);
                        "
                    >
                        DEl
                    </button>
                </form>
            </div>
        </div>
        <% } %> 
    <% } %>
        </section>
        <script src="assets/bootstrap/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.6.0/umd/popper.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/js/jquery.dataTables.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/js/dataTables.bootstrap4.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.flash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
        <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.print.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js"></script>
        <script src="assets/js/script.min.js"></script>
    </body>
</html>
